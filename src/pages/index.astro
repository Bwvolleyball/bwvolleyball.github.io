---
import BaseLayout from '../layouts/BaseLayout.astro';
import { highlights, site, stats } from '../config/site';
import { getCollection } from 'astro:content';

const experiences = (await getCollection('experience')).sort(
	(a, b) => new Date(b.data.start).getTime() - new Date(a.data.start).getTime(),
);

const featuredExperience = experiences.slice(0, 4);
const projects = await getCollection('projects');
const featuredProjects = projects.filter((project) =>
	['stackhawk-integrations', 'promontory-release-cadence', 'schwab-starters'].includes(
		project.data.slug,
	),
);
---

<BaseLayout title="Brandon Ward | Engineering Leadership">
	<section class="fade-up flex flex-col gap-6 lg:grid lg:grid-cols-[1.2fr_1fr] lg:items-center">
		<div class="flex flex-col gap-4">
			<p class="pill w-fit">
				<span class="pill-dot"></span>
				Senior Software Engineer @ StackHawk · {site.location}
			</p>
			<h1 class="text-4xl font-semibold tracking-tight text-ink-050 sm:text-5xl">
				Builder of reliable platforms, integrations, and teams that ship with confidence.
			</h1>
			<p class="max-w-2xl text-lg text-ink-300">
				I lead delivery for security and platform teams—shipping integrations, modernizing state,
				and tightening CI/CD so releases move from months to days.
			</p>
			<div class="flex flex-wrap gap-3">
				<a
					class="accent-gradient rounded-full px-5 py-3 text-sm font-semibold text-ink-900 shadow-lg shadow-amber/30 transition hover:translate-y-[-2px]"
					href="/contact"
				>
					Contact
				</a>
				<a
					class="rounded-full border border-white/15 px-4 py-3 text-sm font-semibold text-ink-050 transition hover:border-white/35"
					href={site.linkedin}
					target="_blank"
					rel="noreferrer"
				>
					LinkedIn
				</a>
				<a
					class="rounded-full border border-white/15 px-4 py-3 text-sm font-semibold text-ink-050 transition hover:border-white/35"
					href={site.resume}
					target="_blank"
					rel="noreferrer"
				>
					Résumé
				</a>
			</div>
		</div>
		<div class="glass relative overflow-hidden rounded-3xl p-6">
			<div class="absolute inset-0 opacity-60 blur-3xl" aria-hidden="true"></div>
			<div class="relative flex flex-col gap-4">
				<p class="text-sm uppercase tracking-[0.2em] text-ink-500">Highlights</p>
				<div class="grid gap-2">
					{highlights.map((item) => (
						<div class="surface flex items-center gap-3 rounded-xl px-4 py-3">
							<div class="h-2 w-2 rounded-full bg-amber"></div>
							<p class="text-sm font-semibold text-ink-050">{item}</p>
						</div>
					))}
				</div>
			</div>
		</div>
	</section>

	<section class="mt-12 grid gap-4 rounded-3xl border border-white/10 bg-surface-2/60 p-6 shadow-[0_10px_60px_rgba(0,0,0,0.35)] lg:grid-cols-4">
		{stats.map((item) => (
			<div class="flex flex-col gap-1 rounded-2xl border border-white/5 bg-surface-3/60 px-4 py-3 shadow-inner shadow-black/30">
				<p class="text-3xl font-semibold text-ink-050">{item.value}</p>
				<p class="text-sm text-ink-400">{item.label}</p>
			</div>
		))}
	</section>

	<section class="mt-12 flex flex-col gap-6">
		<div class="flex flex-col gap-2">
			<p class="text-sm font-semibold text-ink-500">Case Studies</p>
			<h2 class="text-3xl font-semibold text-ink-050">Impact highlights</h2>
			<p class="max-w-2xl text-ink-300">
				Integrations, delivery acceleration, and platform starters—shipped with guardrails.
			</p>
		</div>
		<div class="grid gap-6 md:grid-cols-3">
			{featuredProjects.map((project) => (
				<a
					class="glass relative flex flex-col gap-3 rounded-2xl p-5 transition hover:-translate-y-1 hover:border-white/30"
					href={`/projects#${project.data.slug}`}
				>
					<div class="absolute right-4 top-4 h-10 w-10 rounded-full bg-gradient-to-br from-amber to-teal opacity-40 blur-2xl" />
					<h3 class="text-xl font-semibold text-ink-050">{project.data.title}</h3>
					<p class="text-sm text-ink-300">{project.data.summary}</p>
					<div class="mt-auto flex flex-wrap gap-2">
						{project.data.tech.slice(0, 4).map((tech) => (
							<span class="pill text-xs text-ink-050">{tech}</span>
						))}
					</div>
					<span class="mt-2 text-sm font-semibold text-amber">Read more →</span>
				</a>
			))}
		</div>
	</section>

	<section class="mt-12 flex flex-col gap-6">
		<div class="flex flex-col gap-2">
			<p class="text-sm font-semibold text-ink-500">Experience</p>
			<h2 class="text-3xl font-semibold text-ink-050">Timeline & awards</h2>
			<p class="max-w-2xl text-ink-300">
				A decade delivering Kotlin/Java services, cloud migrations, CI/CD upgrades, and mentorship.
			</p>
		</div>
		<div class="grid gap-4">
			{featuredExperience.map((item) => (
				<div class="glass rounded-2xl border border-white/10 p-5">
					<div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
						<div>
							<p class="text-lg font-semibold text-ink-050">
								{item.data.role} · {item.data.company}
							</p>
							<p class="text-sm text-ink-400">{item.data.location}</p>
						</div>
						<p class="pill text-xs text-ink-050">
							<span class="pill-dot"></span>
							{item.data.start} – {item.data.end}
						</p>
					</div>
					<ul class="mt-3 grid gap-2 text-sm text-ink-300">
						{item.data.highlights.slice(0, 3).map((line) => (
							<li>• {line}</li>
						))}
					</ul>
					<div class="mt-3 flex flex-wrap gap-2">
						{item.data.stacks?.slice(0, 6).map((stack) => (
							<span class="pill text-xs text-ink-050">{stack}</span>
						))}
					</div>
				</div>
			))}
		</div>
		<div>
			<a class="pill focus-ring text-sm font-semibold text-ink-050" href="/experience">
				<span class="pill-dot"></span>
				View full timeline
			</a>
		</div>
	</section>

	<section class="mt-12">
		<div class="glass flex flex-col gap-4 rounded-3xl p-6 lg:flex-row lg:items-center lg:justify-between">
			<div class="max-w-2xl">
				<p class="text-sm font-semibold text-ink-500">Contact</p>
				<h3 class="text-2xl font-semibold text-ink-050">Let&apos;s partner on delivery and reliability.</h3>
				<p class="text-ink-300">
					No forms—just reach out on LinkedIn for collaborations, mentoring, or speaking.
				</p>
			</div>
			<a
				class="accent-gradient rounded-full px-6 py-3 text-sm font-semibold text-ink-900 shadow-lg shadow-amber/30 transition hover:-translate-y-1"
				href={site.linkedin}
				target="_blank"
				rel="noreferrer"
			>
				Connect on LinkedIn
			</a>
		</div>
	</section>
</BaseLayout>
