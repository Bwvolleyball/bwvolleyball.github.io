---
import BaseLayout from '../layouts/BaseLayout.astro';
import { site } from '../config/site';
import { getCollection } from 'astro:content';

const posts = (await getCollection('writing')).sort(
	(a, b) => new Date(b.data.published).getTime() - new Date(a.data.published).getTime(),
);
---

<BaseLayout title="Writing | Brandon Ward" description="MDX articles and curated links on delivery, integrations, and platform reliability.">
	<section class="flex flex-col gap-2">
		<p class="text-sm font-semibold text-ink-500">Writing</p>
		<h1 class="text-4xl font-semibold text-ink-050">Articles & notes</h1>
		<p class="max-w-3xl text-ink-300">
			Case studies and playbooks on CI/CD guardrails, Gradle conventions, and the habits that keep
			teams shipping steadily.
		</p>
	</section>

	<section class="mt-10 grid gap-5">
		{posts.map((post) => (
			<article class="glass rounded-3xl border border-white/10 p-6">
				<div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
					<h2 class="text-2xl font-semibold text-ink-050">{post.data.title}</h2>
					<span class="pill text-xs text-ink-050">
						<span class="pill-dot"></span>
						Published {post.data.published}
					</span>
				</div>
				<p class="text-ink-300">{post.data.summary}</p>
				<div class="mt-3 flex flex-wrap gap-2">
					{post.data.external ? (
						<a
							class="pill focus-ring text-xs font-semibold text-ink-050"
							href={post.data.external}
							target="_blank"
							rel="noreferrer"
						>
							<span class="pill-dot"></span>
							External link
						</a>
					) : (
						<a class="pill text-xs font-semibold text-ink-050" href={`/writing/${post.slug}`}>
							<span class="pill-dot"></span>
							Read article
						</a>
					)}
					<a
						class="pill text-xs font-semibold text-ink-050"
						href={site.linkedin}
						target="_blank"
						rel="noreferrer"
					>
						<span class="pill-dot"></span>
						Contact
					</a>
				</div>
			</article>
		))}
	</section>

	<section class="mt-10 flex flex-col gap-3">
		<h3 class="text-xl font-semibold text-ink-050">Need a deep dive?</h3>
		<p class="text-ink-300">
			I love collaborating on long-form case studies for engineering teams. Let&apos;s capture your
			next migration or launch.
		</p>
		<a
			class="accent-gradient inline-flex w-fit rounded-full px-5 py-3 text-sm font-semibold text-ink-900 shadow-lg shadow-amber/30 transition hover:-translate-y-1"
			href={site.linkedin}
			target="_blank"
			rel="noreferrer"
		>
			Book via LinkedIn
		</a>
	</section>
</BaseLayout>
